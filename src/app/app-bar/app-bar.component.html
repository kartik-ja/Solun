<div class="app-bar">

  <!-- Hamburger (mobile only, left) -->
  <button class="hamburger" (click)="toggleSidebar()">☰</button>

  <!-- Centered Logo -->
  <span class="logo-span">
    <button class="no-border-button" (click)="GoToHome()">
      <img class="crop-image" height="30" src="https://solun-images.s3.us-west-2.amazonaws.com/assets/images/logo-2.png" />
    </button>
  </span>

  <!-- Desktop navigation buttons -->
  <div class="desktop-nav">
    <button class="no-border-button" (click)="GoToEverydayCollection()">Everyday</button>
    <button class="no-border-button" (click)="GoToClassicsCollection()">Classic</button>
    <button class="no-border-button" (click)="GoToElementsCollection()">Elements</button>
  </div>

  <!-- Search bar (moved BEFORE top-right icons) -->
  <div class="search-wrapper">
    <div class="search-container">
      <input
        type="text"
        placeholder="Search watches..."
        [(ngModel)]="searchTerm"
        class="search-bar"
        (input)="onSearch()"
      />
      <span class="search-icon">
        <svg height="18" width="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
             stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </span>
    </div>
    <!-- Search results dropdown -->
      <div class="search-results" *ngIf="showResults && searchResults.length > 0" (mousedown)="$event.preventDefault()">
        <div class="search-item" *ngFor="let item of searchResults | slice:0:5" (click)="onResultClick(item.route)">
          <strong>{{ item.product.name }}</strong><br />
          <small>
            <!-- <em>{{ item.productProp }}:</em> -->
            <span [innerHTML]="highlightMatch(item.productValue)"></span>
          </small>
        </div>
      </div>
  </div>

  <!-- Cart & Profile (right side) -->
  <span class="top-right-buttons">
    <button (click)="GoToCart()" class="no-border-button cart-button">
      <img width="30" src="/assets/icons/cart.svg" />
      <span class="cart-count" *ngIf="cartItemCount > 0">{{ cartItemCount }}</span>
    </button>

    <button (click)="GoToProfile()" class="no-border-button">
      <img width="30" src="/assets/icons/profile.svg" />
    </button>
  </span>
</div>

<!-- Mobile Sidebar -->
<div class="sidebar" [class.open]="showSidebar">
  <button class="close-btn" (click)="toggleSidebar()">×</button>
  <button class="sidebar-link" (click)="GoToEverydayCollection(); toggleSidebar()">Everyday</button>
  <button class="sidebar-link" (click)="GoToClassicsCollection(); toggleSidebar()">Classic</button>
  <button class="sidebar-link" (click)="GoToElementsCollection(); toggleSidebar()">Elements</button>
</div>

<!-- Dark overlay -->
<div class="overlay" *ngIf="showSidebar" (click)="onOverlayClick()"></div>
